{"ast":null,"code":"import{useEffect,useState}from\"react\";import API from\"../api/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SERVICES=[\"Consultation\",\"Repair\",\"Maintenance\"];export default function Booking(){const[service,setService]=useState(\"\");const[date,setDate]=useState(\"\");const[slots,setSlots]=useState([]);const[timeSlot,setTimeSlot]=useState(\"\");const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");const[message,setMessage]=useState(\"\");useEffect(()=>{if(!date)return;const fetchSlots=async()=>{try{setLoading(true);setError(\"\");const res=await API.get(\"/bookings/available-slots?date=\".concat(date));setSlots(res.data);setTimeSlot(\"\");}catch(_unused){setError(\"Failed to fetch available slots\");setSlots([]);}finally{setLoading(false);}};fetchSlots();},[date]);const handleSubmit=async e=>{e.preventDefault();setError(\"\");setMessage(\"\");if(!service||!date||!timeSlot){return setError(\"All fields are required\");}try{await API.post(\"/bookings\",{service,date,timeSlot});setMessage(\"✅ Booking request submitted\");setService(\"\");setDate(\"\");setTimeSlot(\"\");setSlots([]);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Booking failed\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{maxWidth:\"500px\",margin:\"auto\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:\"center\"},children:\"Book Appointment\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Service\"}),/*#__PURE__*/_jsxs(\"select\",{value:service,onChange:e=>setService(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select service\"}),SERVICES.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s,children:s},s))]}),/*#__PURE__*/_jsx(\"label\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:date,min:new Date().toISOString().split(\"T\")[0],onChange:e=>setDate(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"Time Slot\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading slots...\"}):/*#__PURE__*/_jsxs(\"select\",{value:timeSlot,onChange:e=>setTimeSlot(e.target.value),disabled:!slots.length,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select time slot\"}),slots.map(slot=>/*#__PURE__*/_jsx(\"option\",{value:slot,children:slot},slot))]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{width:\"100%\",marginTop:\"10px\"},children:\"Book Now\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"green\",marginTop:\"10px\"},children:message}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\",marginTop:\"10px\"},children:error})]})});}","map":{"version":3,"names":["useEffect","useState","API","jsx","_jsx","jsxs","_jsxs","SERVICES","Booking","service","setService","date","setDate","slots","setSlots","timeSlot","setTimeSlot","loading","setLoading","error","setError","message","setMessage","fetchSlots","res","get","concat","data","_unused","handleSubmit","e","preventDefault","post","err","_err$response","_err$response$data","response","className","children","style","maxWidth","margin","textAlign","onSubmit","value","onChange","target","map","s","type","min","Date","toISOString","split","disabled","length","slot","width","marginTop","color"],"sources":["C:/Users/banot/Downloads/online-booking-system/frontend/src/pages/Booking.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport API from \"../api/api\";\r\n\r\nconst SERVICES = [\"Consultation\", \"Repair\", \"Maintenance\"];\r\n\r\nexport default function Booking() {\r\n  const [service, setService] = useState(\"\");\r\n  const [date, setDate] = useState(\"\");\r\n  const [slots, setSlots] = useState([]);\r\n  const [timeSlot, setTimeSlot] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!date) return;\r\n\r\n    const fetchSlots = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(\"\");\r\n        const res = await API.get(\r\n          `/bookings/available-slots?date=${date}`\r\n        );\r\n        setSlots(res.data);\r\n        setTimeSlot(\"\");\r\n      } catch {\r\n        setError(\"Failed to fetch available slots\");\r\n        setSlots([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchSlots();\r\n  }, [date]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setMessage(\"\");\r\n\r\n    if (!service || !date || !timeSlot) {\r\n      return setError(\"All fields are required\");\r\n    }\r\n\r\n    try {\r\n      await API.post(\"/bookings\", {\r\n        service,\r\n        date,\r\n        timeSlot,\r\n      });\r\n\r\n      setMessage(\"✅ Booking request submitted\");\r\n      setService(\"\");\r\n      setDate(\"\");\r\n      setTimeSlot(\"\");\r\n      setSlots([]);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Booking failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"card\" style={{ maxWidth: \"500px\", margin: \"auto\" }}>\r\n        <h2 style={{ textAlign: \"center\" }}>Book Appointment</h2>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          {/* Service */}\r\n          <label>Service</label>\r\n          <select\r\n            value={service}\r\n            onChange={(e) => setService(e.target.value)}\r\n          >\r\n            <option value=\"\">Select service</option>\r\n            {SERVICES.map((s) => (\r\n              <option key={s} value={s}>\r\n                {s}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          {/* Date */}\r\n          <label>Date</label>\r\n          <input\r\n            type=\"date\"\r\n            value={date}\r\n            min={new Date().toISOString().split(\"T\")[0]}\r\n            onChange={(e) => setDate(e.target.value)}\r\n          />\r\n\r\n          {/* Time Slot */}\r\n          <label>Time Slot</label>\r\n          {loading ? (\r\n            <p>Loading slots...</p>\r\n          ) : (\r\n            <select\r\n              value={timeSlot}\r\n              onChange={(e) => setTimeSlot(e.target.value)}\r\n              disabled={!slots.length}\r\n            >\r\n              <option value=\"\">Select time slot</option>\r\n              {slots.map((slot) => (\r\n                <option key={slot} value={slot}>\r\n                  {slot}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          )}\r\n\r\n          <button\r\n            type=\"submit\"\r\n            style={{ width: \"100%\", marginTop: \"10px\" }}\r\n          >\r\n            Book Now\r\n          </button>\r\n        </form>\r\n\r\n        {message && (\r\n          <p style={{ color: \"green\", marginTop: \"10px\" }}>\r\n            {message}\r\n          </p>\r\n        )}\r\n        {error && (\r\n          <p style={{ color: \"red\", marginTop: \"10px\" }}>\r\n            {error}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}