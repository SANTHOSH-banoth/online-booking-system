{"ast":null,"code":"import _objectSpread from\"C:/Users/banot/Downloads/online-booking-system/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState}from\"react\";import api from\"../api/api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function AdminDashboard(){const[bookings,setBookings]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");// Fetch all bookings (ADMIN)\nconst fetchBookings=async()=>{try{setLoading(true);const res=await api.get(\"/bookings\");setBookings(res.data);setError(\"\");}catch(err){setError(\"Failed to load bookings (Admin only)\");}finally{setLoading(false);}};useEffect(()=>{fetchBookings();},[]);// Approve / Reject booking\nconst updateStatus=async(id,status)=>{try{await api.put(\"/bookings/\".concat(id,\"/status\"),{status});setBookings(prev=>prev.map(b=>b._id===id?_objectSpread(_objectSpread({},b),{},{status}):b));}catch(err){alert(\"Failed to update booking status\");}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading bookings...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Dashboard\"}),bookings.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No bookings available\"}):/*#__PURE__*/_jsxs(\"table\",{border:\"1\",cellPadding:\"10\",width:\"100%\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Service\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bookings.map(b=>{var _b$user,_b$user2,_b$service;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:(_b$user=b.user)===null||_b$user===void 0?void 0:_b$user.name}),/*#__PURE__*/_jsx(\"td\",{children:(_b$user2=b.user)===null||_b$user2===void 0?void 0:_b$user2.email}),/*#__PURE__*/_jsx(\"td\",{children:((_b$service=b.service)===null||_b$service===void 0?void 0:_b$service.name)||b.service}),/*#__PURE__*/_jsx(\"td\",{children:new Date(b.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:b.timeSlot}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"b\",{style:{color:b.status===\"approved\"?\"green\":b.status===\"rejected\"?\"red\":\"orange\"},children:b.status})}),/*#__PURE__*/_jsx(\"td\",{children:b.status===\"pending\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateStatus(b._id,\"approved\"),style:{marginRight:\"6px\"},children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateStatus(b._id,\"rejected\"),children:\"Reject\"})]}):/*#__PURE__*/_jsx(\"span\",{children:\"\\u2014\"})})]},b._id);})})]})]});}","map":{"version":3,"names":["useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","bookings","setBookings","loading","setLoading","error","setError","fetchBookings","res","get","data","err","updateStatus","id","status","put","concat","prev","map","b","_id","_objectSpread","alert","children","style","color","padding","length","border","cellPadding","width","_b$user","_b$user2","_b$service","user","name","email","service","Date","date","toLocaleDateString","timeSlot","onClick","marginRight"],"sources":["C:/Users/banot/Downloads/online-booking-system/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport api from \"../api/api\";\r\n\r\nexport default function AdminDashboard() {\r\n  const [bookings, setBookings] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // Fetch all bookings (ADMIN)\r\n  const fetchBookings = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await api.get(\"/bookings\");\r\n      setBookings(res.data);\r\n      setError(\"\");\r\n    } catch (err) {\r\n      setError(\"Failed to load bookings (Admin only)\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBookings();\r\n  }, []);\r\n\r\n  // Approve / Reject booking\r\n  const updateStatus = async (id, status) => {\r\n    try {\r\n      await api.put(`/bookings/${id}/status`, { status });\r\n      setBookings((prev) =>\r\n        prev.map((b) =>\r\n          b._id === id ? { ...b, status } : b\r\n        )\r\n      );\r\n    } catch (err) {\r\n      alert(\"Failed to update booking status\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Loading bookings...</p>;\r\n  if (error) return <p style={{ color: \"red\" }}>{error}</p>;\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <h2>Admin Dashboard</h2>\r\n\r\n      {bookings.length === 0 ? (\r\n        <p>No bookings available</p>\r\n      ) : (\r\n        <table border=\"1\" cellPadding=\"10\" width=\"100%\">\r\n          <thead>\r\n            <tr>\r\n              <th>User</th>\r\n              <th>Email</th>\r\n              <th>Service</th>\r\n              <th>Date</th>\r\n              <th>Time</th>\r\n              <th>Status</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {bookings.map((b) => (\r\n              <tr key={b._id}>\r\n                <td>{b.user?.name}</td>\r\n                <td>{b.user?.email}</td>\r\n                <td>{b.service?.name || b.service}</td>\r\n                <td>{new Date(b.date).toLocaleDateString()}</td>\r\n                <td>{b.timeSlot}</td>\r\n                <td>\r\n                  <b\r\n                    style={{\r\n                      color:\r\n                        b.status === \"approved\"\r\n                          ? \"green\"\r\n                          : b.status === \"rejected\"\r\n                          ? \"red\"\r\n                          : \"orange\",\r\n                    }}\r\n                  >\r\n                    {b.status}\r\n                  </b>\r\n                </td>\r\n                <td>\r\n                  {b.status === \"pending\" ? (\r\n                    <>\r\n                      <button\r\n                        onClick={() =>\r\n                          updateStatus(b._id, \"approved\")\r\n                        }\r\n                        style={{ marginRight: \"6px\" }}\r\n                      >\r\n                        Approve\r\n                      </button>\r\n                      <button\r\n                        onClick={() =>\r\n                          updateStatus(b._id, \"rejected\")\r\n                        }\r\n                      >\r\n                        Reject\r\n                      </button>\r\n                    </>\r\n                  ) : (\r\n                    <span>â€”</span>\r\n                  )}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n \r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}